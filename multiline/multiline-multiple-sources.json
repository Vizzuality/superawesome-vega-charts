{
  "$schema": "https://vega.github.io/schema/vega/v3.0.json",
  "autosize": {"type": "pad", "resize": true, "contains":"padding"},
  "data": [
    {
      "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, historical as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Samish' order by numeric_m ASC",
      "name": "line1",
      "format": {
        "type": "json",
        "property": "data"
      },
      "transform": [
        {
          "type":"formula",
          "as":"c",
          "expr":"'Historical'"
        },
        {
          "type": "collect",
          "sort": {
            "field": [
              "x"
            ],
            "order": [
              "ascending"
            ]
          }
        }
      ]
    },
    {
      "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, A1B_2040s as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Samish' order by numeric_m ASC",
      "name": "line2",
      "format": {
        "type": "json",
        "property": "data"
      },
      "transform": [
        {
          "type":"formula",
          "as":"c",
          "expr":"'A1B_2040s'"
        },
        {
          "type": "collect",
          "sort": {
            "field": [
              "x"
            ],
            "order": [
              "ascending"
            ]
          }
        }
      ]
    },
    {
      "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, A1B_2080s as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Samish' order by numeric_m ASC",
      "name": "line3",
      "format": {
        "type": "json",
        "property": "data"
      },
      "transform": [
        {
          "type":"formula",
          "as":"c",
          "expr":"'A1B_2080s'"
        },
        {
          "type": "collect",
          "sort": {
            "field": [
              "x"
            ],
            "order": [
              "ascending"
            ]
          }
        }
      ]
    },
    {
      "name": "axis",
      "values": [
        {
          "x": "Years",
          "y": "cfs"
        }
      ]
    },
    {
      "name": "legend",
      "values": [
        {
          "cat": "Historical"
        },
        {
          "cat": "A1B_2040s"
        },
        {
          "cat": "A1B_2080s"
        }
      ]
    }
  ],
  "name": "Rain dominant",
  "scales": [
    {
      "name": "x",
      "type": "point",
      "nice": true,
      "range": "width",
      "domain":{ "fields": [
    {"data": "line1", "field": "z"},
    {"data": "line2", "field": "z"},
    {"data": "line3", "field": "z"}
   ]}
    },
    {
      "name": "y",
      "type": "linear",
      "range": "height",
      "nice": true,
      "zero": true,
      "domain": { "fields": [
    {"data": "line1", "field": "y"},
    {"data": "line2", "field": "y"},
    {"data": "line3", "field": "y"}
   ]}
    },
    {
      "name": "color",
      "type": "ordinal",
      "range": "category",
      "domain": {"data": "legend", "field": "cat"}
    }
  ],

  "axes": [
    {"orient": "bottom", "scale": "x"},
    {"orient": "left", "scale": "y",
    "title":"CFS",
    "encode": {
      "title": {
        "update": {
          "dx": {"value": 0},
          "dy": {"value": 0},
          "x": {"value": 0},
          "y": {"value": -10},
          "align": {"value": "right"},
          "baseline": {"value": "bottom"},
          "angle": {"value": 0},
          "fontSize": {"value": 12}
        }
      }
    }
    }
  ],

      "marks": [
        {
          "type": "line",
          "from": {"data": "line1"},
          "encode": {
            "enter": {
              "x": {"scale": "x", "field": "z"},
              "y": {"scale": "y", "field": "y"},
              "stroke": {"scale": "color", "field": "c"},
              "strokeWidth": {"value": 2}
            },
            "update": {
              "fillOpacity": {"value": 1}
            },
            "hover": {
              "fillOpacity": {"value": 0.5}
            }
          }
        },
        {
          "type": "line",
          "from": {"data": "line2"},
          "encode": {
            "enter": {
              "x": {"scale": "x", "field": "z"},
              "y": {"scale": "y", "field": "y"},
              "stroke": {"scale": "color", "field": "c"},
              "strokeWidth": {"value": 2},
              "strokeDash":{
                "value":[
                  1,2
                ]
              }
            },

            "update": {
              "fillOpacity": {"value": 1}
            },
            "hover": {
              "fillOpacity": {"value": 0.5}
            }
          }
        },
        {
          "type": "line",
          "from": {"data": "line3"},
          "encode": {
            "enter": {
              "x": {"scale": "x", "field": "z"},
              "y": {"scale": "y", "field": "y"},
              "stroke": {"scale": "color", "field": "c"},
              "strokeWidth": {"value": 2},
              "strokeDash":{
                "value":[
                  3,3
                ]
              }
            },
            "update": {
              "fillOpacity": {"value": 1}
            },
            "hover": {
              "fillOpacity": {"value": 0.5}
            }
          }
        }
      ],
"legends": [
  {
    "title":"Samish river",
    "stroke": "color",
    "orient":"top-right",
    "offset":{"signal":"width<200?-10:0"},
    "encode": {
      "title": {
        "update": {
          "fontSize": {"value": 14}
        }
      },
      "legend": {
        "update": {
          "stroke": {"value": "transparent"},
          "strokeWidth": {"value": 1.5}
        }
      }
    }
  }
]
}